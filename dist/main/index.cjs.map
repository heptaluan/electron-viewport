{"version":3,"file":"index.cjs","sources":["../../packages/main/index.ts"],"sourcesContent":["import { app, BrowserWindow, shell, ipcMain } from 'electron'\nimport { release } from 'os'\nimport { join } from 'path'\n\n// Disable GPU Acceleration for Windows 7\nif (release().startsWith('6.1')) app.disableHardwareAcceleration()\n\n// Set application name for Windows 10+ notifications\nif (process.platform === 'win32') app.setAppUserModelId(app.getName())\n\nif (!app.requestSingleInstanceLock()) {\n  app.quit()\n  process.exit(0)\n}\nprocess.env['ELECTRON_DISABLE_SECURITY_WARNINGS'] = 'true'\n\nlet win: BrowserWindow | null = null\n\nasync function createWindow() {\n  win = new BrowserWindow({\n    width: 1024,\n    height: 768,\n    titleBarStyle: 'hidden',\n    darkTheme: true,\n    webPreferences: {\n      preload: join(__dirname, '../preload/index.cjs'),\n      nodeIntegration: true,\n      contextIsolation: false,\n    },\n  })\n\n  if (app.isPackaged) {\n    win.loadFile(join(__dirname, '../renderer/index.html'))\n    win.webContents.openDevTools()\n  } else {\n    // ðŸš§ Use ['ENV_NAME'] avoid vite:define plugin\n    const url = `http://${process.env['VITE_DEV_SERVER_HOST']}:${process.env['VITE_DEV_SERVER_PORT']}`\n\n    win.loadURL(url)\n    win.webContents.openDevTools()\n  }\n\n  // Test active push message to Renderer-process\n  win.webContents.on('did-finish-load', () => {\n    win?.webContents.send('main-process-message', new Date().toLocaleString())\n  })\n\n  // Make all links open with the browser, not with the application\n  win.webContents.setWindowOpenHandler(({ url }) => {\n    if (url.startsWith('https:')) shell.openExternal(url)\n    return { action: 'deny' }\n  })\n}\n\napp.whenReady().then(createWindow)\n\napp.on('window-all-closed', () => {\n  win = null\n  if (process.platform !== 'darwin') app.quit()\n})\n\napp.on('second-instance', () => {\n  if (win) {\n    // Focus on the main window if the user tried to open another\n    if (win.isMinimized()) win.restore()\n    win.focus()\n  }\n})\n\napp.on('activate', () => {\n  const allWindows = BrowserWindow.getAllWindows()\n  if (allWindows.length) {\n    allWindows[0].focus()\n  } else {\n    createWindow()\n  }\n\n})\n\nipcMain.on('min', function (event) {\n  const win = BrowserWindow.fromWebContents(event.sender)\n  // @ts-ignore\n  win.minimize()\n})\nipcMain.on('max', function (event) {\n  const win: any = BrowserWindow.fromWebContents(event.sender)\n  if (win.isMaximized()) {\n    win.unmaximize()\n  } else {\n    win.maximize()\n  }\n})\nipcMain.on('close', function (event) {\n  const win = BrowserWindow.fromWebContents(event.sender)\n  // @ts-ignore\n  win.close()\n})\n"],"names":["release","app","BrowserWindow","join","shell","ipcMain"],"mappings":";;;;AAKA,IAAIA,WAAU,EAAA,WAAW,KAAK;AAAGC,WAAA,IAAI,4BAA4B;AAGjE,IAAI,QAAQ,aAAa;AAAaA,WAAAA,IAAA,kBAAkBA,aAAI,QAAS,CAAA;AAErE,IAAI,CAACA,SAAAA,IAAI,6BAA6B;AACpCA,WAAA,IAAI,KAAK;AACT,UAAQ,KAAK,CAAC;AAChB;AACA,QAAQ,IAAI,wCAAwC;AAEpD,IAAI,MAA4B;AAEhC,8BAA8B;AAC5B,QAAM,IAAIC,SAAAA,cAAc;AAAA,IACtB,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,eAAe;AAAA,IACf,WAAW;AAAA,IACX,gBAAgB;AAAA,MACd,SAASC,KAAAA,KAAK,WAAW,sBAAsB;AAAA,MAC/C,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,IACpB;AAAA,EAAA,CACD;AAED,MAAIF,SAAAA,IAAI,YAAY;AAClB,QAAI,SAASE,KAAAA,KAAK,WAAW,wBAAwB,CAAC;AACtD,QAAI,YAAY;EAAa,OACxB;AAEL,UAAM,MAAM,UAAU,QAAQ,IAAI,2BAA2B,QAAQ,IAAI;AAEzE,QAAI,QAAQ,GAAG;AACf,QAAI,YAAY;EAClB;AAGI,MAAA,YAAY,GAAG,mBAAmB,MAAM;AAC1C,+BAAK,YAAY,KAAK,wBAAwB,IAAI,KAAK,EAAE;EAAgB,CAC1E;AAGD,MAAI,YAAY,qBAAqB,CAAC,EAAE,UAAU;AAC5C,QAAA,IAAI,WAAW,QAAQ;AAAGC,qBAAM,aAAa,GAAG;AAC7C,WAAA,EAAE,QAAQ;EAAO,CACzB;AACH;AAEAH,SAAI,IAAA,UAAY,EAAA,KAAK,YAAY;AAEjCA,SAAAA,IAAI,GAAG,qBAAqB,MAAM;AAC1B,QAAA;AACN,MAAI,QAAQ,aAAa;AAAUA,aAAA,IAAI,KAAK;AAC9C,CAAC;AAEDA,SAAAA,IAAI,GAAG,mBAAmB,MAAM;AAC9B,MAAI,KAAK;AAEP,QAAI,IAAI,YAAY;AAAG,UAAI,QAAQ;AACnC,QAAI,MAAM;AAAA,EACZ;AACF,CAAC;AAEDA,SAAAA,IAAI,GAAG,YAAY,MAAM;AACjB,QAAA,aAAaC,uBAAc;AACjC,MAAI,WAAW,QAAQ;AACrB,eAAW,GAAG;EAAM,OACf;AACQ;EACf;AAEF,CAAC;AAEDG,SAAAA,QAAQ,GAAG,OAAO,SAAU,OAAO;AACjC,QAAM,OAAMH,SAAA,cAAc,gBAAgB,MAAM,MAAM;AAEtD,OAAI,SAAS;AACf,CAAC;AACDG,SAAAA,QAAQ,GAAG,OAAO,SAAU,OAAO;AACjC,QAAM,OAAWH,SAAA,cAAc,gBAAgB,MAAM,MAAM;AACvD,MAAA,KAAI,eAAe;AACrB,SAAI,WAAW;AAAA,EAAA,OACV;AACL,SAAI,SAAS;AAAA,EACf;AACF,CAAC;AACDG,SAAAA,QAAQ,GAAG,SAAS,SAAU,OAAO;AACnC,QAAM,OAAMH,SAAA,cAAc,gBAAgB,MAAM,MAAM;AAEtD,OAAI,MAAM;AACZ,CAAC;"}